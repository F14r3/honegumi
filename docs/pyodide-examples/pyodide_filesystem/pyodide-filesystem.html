<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jinja2 with Pyodide Example</title>
    <script src="https://cdn.jsdelivr.net/pyodide/v0.21.3/full/pyodide.js"></script>
</head>
<body>
    <h1>Jinja2 with Pyodide Example</h1>
    <pre id="output"></pre>

    <script type="text/javascript">
        async function main() {
            // Load Pyodide
            let pyodide = await loadPyodide();
            await pyodide.loadPackage("jinja2");

            // Fetch the Jinja2 template from the _static directory
            const response = await fetch("randint.py.jinja");
            const templateStr = await response.text();

            const code = `
import random
from jinja2 import Template

# Use the fetched template content
template_str = """${templateStr}"""

# Create a Jinja2 Template object
template = Template(template_str)

# Define the data to be rendered
data = {
    'min_value': 1,
    'max_value': 10,
}

# Render the template with the data
rendered_script = template.render(data)

# Execute the rendered script and capture the output
exec(rendered_script)
            `;

            // Run the Python code and capture the output
            let output = pyodide.runPython(code);
            document.getElementById("output").textContent = output;
        }

        main();
    </script>
</body>
</html>
